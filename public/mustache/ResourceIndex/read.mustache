<div class="column-container">

    {{#scope}}

        <article class="resource" data-behaviour="populateMap">

            <script type="application/ld+json">
                {{{.}}}
            </script>

            <div class="resource-header">

                {{#if user.email}}
                    <a href="#resource-edit" class="btn btn-inverted resource-edit-btn" data-app="to-modal-and-attach-behaviours">
                        <i class="fa fa-pencil"></i>
                    </a>
                {{/if}}

                <h1 class="resource-title">
                    {{getIcon @type}}
                    {{#localized name}}
                        {{[@value]}}
                    {{else}}
                        {{[@id]}}
                    {{/localized}}
                </h1>

                {{#serviceType}}
                    <div class="resource-subline">
                        <div class="resource-subline-label">Service Type</div>
                        {{.}}
                    </div>
                {{/serviceType}}

            </div>

            {{#image}}
                <div class="paragraph-image">
                    <a href="{{.}}" target="_blank">
                        <img src="{{.}}" width="250" />
                    </a>
                </div>
            {{/image}}

            {{#localized description}}
                <p>{{{[@value]}}}</p>
            {{/localized}}

            {{#availableChannel}}{{#serviceUrl}}
                <p>
                    <a href="{{.}}" target="_blank" class="btn btn-default">
                        <i class="fa fa-external-link"></i>
                        {{stripProtocol .}}
                    </a>
                </p>
            {{/serviceUrl}}{{/availableChannel}}

            <table class="table resource-details-table">

                <tr>
                    <td>{{i18n "Service.availableChannel.availableLanguage"}}</td>
                    <td>
                        <ul class="comma-seperated-list">
                            {{#availableChannel}}
                                {{#availableLanguage}}
                                    <li>{{i18n . bundle = "languages"}}</li>
                                {{/availableLanguage}}
                            {{/availableChannel}}
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td>{{i18n "Service.audience"}}</td>
                    <td>
                        <ul class="resource-list truncated">
                            {{#audience}}
                                <li>{{>ResourceIndex/link.mustache}}</li>
                            {{/audience}}
                        </ul>
                    </td>
                </tr>

                {{#if provider}}
                    <tr>
                        <td>{{i18n "Service.provider"}}</td>
                        <td>
                            <ul class="resource-list truncated">
                                {{#provider}}
                                    <li>{{>ResourceIndex/link.mustache}}</li>
                                {{/provider}}
                            </ul>
                        </td>
                    </tr>
                {{/if}}

                {{#if about}}
                    <tr>
                        <td>{{i18n "Service.about"}}</td>
                        <td>
                            <ul class="resource-list truncated">
                                {{#about}}
                                    <li>{{>ResourceIndex/link.mustache}}</li>
                                {{/about}}
                            </ul>
                        </td>
                    </tr>
                {{/if}}

                {{#if sameAs}}
                    <tr>
                        <td>{{i18n "Service.sameAs"}}</td>
                        <td>
                            <ul class="resource-list truncated">
                                {{#sameAs}}
                                    <li>{{externalLink .}}</li>
                                {{/sameAs}}
                            </ul>
                        </td>
                    </tr>
                {{/if}}

                {{#if memberOf}}
                    <tr>
                        <td>{{i18n "Service.memberOf"}}</td>
                        <td>
                            <ul class="resource-list truncated">
                                {{#memberOf}}
                                    <li>{{>ResourceIndex/link.mustache}}</li>
                                {{/memberOf}}
                            </ul>
                        </td>
                    </tr>
                {{/if}}

                {{#if tag}}
                    <tr>
                        <td>{{i18n "Service.tag"}}</td>
                        <td>
                            <ul class="comma-seperated-list">
                                {{#tag}}
                                    <li><a href="/resource/?filter.about.tag={{.}}">{{.}}</a></li>
                                {{/tag}}
                            </ul>
                        </td>
                    </tr>
                {{/if}}

            </table>

        </article>

        {{#if user.email}}

            <form id="resource-edit" method="post" class="clearfix visible-modal" action="/resource/{{[@id]}}">

                <h1>Edit {{[@type]}}</h1>

                {{> (stringFormat "ResourceIndex/%s/edit.mustache" @type)}}

                <div class="pull-right resource-form-top-padding">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Quit</button>
                    <button type="submit" class="btn btn-inverted">Save Changes</button>
                </div>
            </form>

        {{/if}}

    {{/scope}}

</div>
