<div role="complementary" class="color-scheme-map column large" data-view="map">
</div>
<div role="main" class="color-scheme-text list-view column small">
    {{#unless scope.list}}
    <section>
        <form method="get" action="/resource/" id="search">
            <script type="application/ld+json">
              {{json scope.resources.aggregations}}
            </script>
            {{#each scope.resources.aggregations}}
                <ul class="filters" title="{{i18n (getField @key)}}">
                    {{#buckets}}
                        <li {{#ifIn @key key scope.resources.filters}}class="active"{{/ifIn}}>
                            <label>
                                <input type="checkbox" class="filter" name="filter.{{@key}}" value="{{key}}" {{#ifIn @key key scope.resources.filters}}checked{{/ifIn}}>
                                <b>{{i18n key bundle=(getBundle (getField @key))}} ({{doc_count}})</b>
                            </label>
                        </li>
                    {{/buckets}}
                </ul>
            {{/each}}
            <hr style="clear: both;">
            <div class="input-group">
              <input type="text" name="q" class="form-control input-lg" value="{{scope.resources.searchTerms}}" placeholder="Search for ...">
              <span class="input-group-btn">
                <button class="btn btn-default btn-lg" type="submit"><i class="fa fa-search"></i></button>
              </span>
            </div>
        </form>
    </section>
    
    <div class="hits">{{scope.resources.totalItems}} found ...</div>
    {{/unless}}
    <section>
        <ul class="populate-map resource-list" data-behaviour="linkedListEntries">
            <script type="application/ld+json">
                {{{scope.resources.member}}}
            </script>
            {{#scope.resources.member}}
                <li about="{{@id}}">
                  {{> (stringFormat "ResourceIndex/%s/list.mustache" @type) }}
                </li>
            {{/scope.resources.member}}
        </ul>
        {{#unless scope.list}}
            {{#if scope.resources.firstPage}}
                <a href="{{scope.resources.firstPage}}">first</a>
            {{/if}}
            {{#if scope.resources.previousPage}}
                <a href="{{scope.resources.previousPage}}">prev</a>
            {{/if}}
            {{#if scope.resources.nextPage}}
                <a href="{{scope.resources.nextPage}}">next</a>
            {{/if}}
            {{#if scope.resources.lastPage}}
                <a href="{{scope.resources.lastPage}}">last</a>
            {{/if}}
        {{else}}
            <a href="/resource/">more</a>
        {{/unless}}
    </section>

    <!--
    {{#form "/resource/" class="hijax edit" target="_parent"}}
        {{> ResourceIndex/Service/edit.mustache}}
        {{submit "Submit"}}
    {{/form}}
    -->
</div>
